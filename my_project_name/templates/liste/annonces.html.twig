{% extends 'base.html.twig' %}

{% block title %}Liste des annonces
{% endblock %}

{% block body %}
	<div class="container">
		<u><h1 class="my-5 text-center">Liste des annonces</h1></u>
		{% for annonce in annonces %}

			<div class="container border-bottom border-danger my-5">

               <div class="row">
					<div class="col-md-8"><h2>{{annonce.titre}}</h2></div>

					<div class="col-md-4">

						<!-- Affichage des tags -->
	                {% for tags in annonce.Tag %}
	                {% if tags %}
	                	<div class="badge badge-pill badge-info">
		                        {{ tags.nom }}
						</div>
					{% endif %}
					{% endfor %}
				</div> <!-- fin col tags -->

			   </div> <!-- fin row bandeau titre annonce-->
			   
			   <p class="font-italic">{{annonce.DateCreation | format_datetime(pattern="'le' dd MMMM 'à' H'h'mm", locale='fr')}} - 
				 
				{{annonce.prix}}€
			   </p>
				<p>
				{{annonce.description | slice(0, 200)}}...
				</p>
				
				<div>
					<!-- On affiche la liste des postulants -->
					{% if not annonce.UserPostulant.isEmpty %}
					<u><p>Les artistes intéressés :</p></u>

							<ul class="list-group list-group-horizontal">
								{% for user in annonce.UserPostulant %}

									<li id="listeAvatar" class="">
										<a href="{{ path('mon_compte', {id: user.id}) }}"><img src="{{ asset('images/'~user.avatar)}}" alt="avatar" class="img-fluid rounded-circle mr-2 mb-3" style="width: 34px; height:34px;" data-toggle="tooltip" data-placement="top" title="{{user.name}} {{user.lastname}} "></a>
									</li>
									{% endfor %}

							</ul>
				{% else %}
				  <p> Aucun artiste n'a postulé à cette annonce pour le moment</p>
				{% endif %}
				</div>

				<a href="{{ path('annonce', { id: annonce.id }) }}" class="btn btn-primary mb-3">Lire l'annonce</a>
			</div>

		{% endfor %}
	</div>
{% endblock %}
