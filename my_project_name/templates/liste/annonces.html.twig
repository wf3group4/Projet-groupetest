{% extends 'base.html.twig' %}

{% block title %}Liste des annonces
{% endblock %}

{% block body %}
	<div class="container">
		<u><h1 class="my-5 text-center">Liste des annonces</h1></u>

		{% for annonce in annonces %}

			<div class="container border-bottom border-danger my-5">

               <div class="row">
					<div class="col-4"><h2>{{annonce.titre}}</h2></div>

					<div class="col-8">

						<!-- Affichage des tags -->
	                {% for tags in annonce.Tag %}
	                {% if tags %}
	                	<div class="badge badge-pill badge-info">
		                        {{ tags.nom }}
						</div>
					{% endif %}
					{% endfor %}
				</div> <!-- fin col tags -->

			   </div> <!-- fin row bandeau titre annonce-->
			   
			   <p class="font-italic">{{annonce.DateCreation | format_datetime(pattern="'le' dd MMMM 'à' H'h'mm", locale='en')}} - 
				 
				{{annonce.prix}}€
			   </p>
				<p>
				{{annonce.description | slice(0, 200)}}...
				</p>
				
				<div>
					<!-- On affiche la liste des postulants -->
					{% if not annonce.UserPostulant.isEmpty %}
					{% for user in annonce.UserPostulant %}
		
						<div>
							<ul>
	
								<div class="row">
									<li>
										{{user.name}}
										{{user.lastname}}
									</li>
									<a class="ml-5 pt-1 badge badge-pill badge-primary" href="{{path('profil', {id: user.id})}} ">Voir son profil</a>
								</div>
	
							</ul>
						</div>
					{% endfor %}
				{% else %}
				  <p> Aucun artiste n'a postulé à cette annonce pour le moment</p>
				{% endif %}
				</div>

				<a href="{{ path('annonce', { id: annonce.id }) }}" class="btn btn-primary mb-3">Lire l'annonce</a>
			</div>

		{% endfor %}
	</div>
{% endblock %}
